var appointments,global,buttons,dropdown,textInput,subheader,modal,clickX,dragX,cssBezier=new Ease(new BezierEasing(.7,0,.3,1)),pages={current:"NA",init:function(t){var e=pages.list.appointmentsDashboard;for(var a in pages.list){var n=pages.list[a];n.hash===window.location.hash.substring(1)&&(e=n)}e.init(t)},gotoPage:function(t,e){$(t.container).load(t.url,function(){$(window).scrollTop(0),$(".loading-page").removeClass("loading"),window.location.hash.substr(1)!==t.hash&&pages.updateHash(t.hash),pages.current=t.hash;var a=$("body").attr("class").split(" ");$("body").attr("class",a[0]),$("body").addClass(t.hash),e&&e()})},updateHash:function(t){window.location.hash.substr(1)!==t?window.location.hash=t:pages.init(!0)},list:{appointmentsDashboard:{container:".page-content",defaultView:"ListView",url:"pages/appointmentsDashboardShell.html",hash:"dashboard",init:function(t,e){e=void 0===e?this.defaultView:e,$(".loading-page").addClass("loading");var a=function(){pages.gotoPage(pages.list.appointmentsDashboard,function(){buttons.renderButtons(),dropdown.renderDropdowns(),pages.list["appointments"+e].init(t)})},n=t?500:0;setTimeout(function(){a()},n)}},appointmentsListView:{container:".appointments-view",url:"pages/appointmentsListView.html",hash:"listView",viewName:"ListView",init:function(t){if(0===$(".dashboard-header").length)return t&&$(".loading-page").addClass("loading").css("top",""),void pages.list.appointmentsDashboard.init(t,pages.list.appointmentsListView.viewName);t&&$(".loading-page").css("top",$(".appointments-view").offset().top).addClass("loading");var e=function(){pages.gotoPage(pages.list.appointmentsListView,function(){$(".toggle.viewStyle").addClass("selected-state"),$(".toggle.viewStyle .toggle-btn[value='List']").addClass("sel"),$.get("partial/_listdate.html",function(t){var e=$(t);$(".appointments-list").append(e);for(var a=appointments.startingWeek,n=0;n<$(".date-row").length;n++){var o=$(".date-row").eq(n),i=appointments.dateStrToObj(a);o.attr("id",i.dateNoHyphens),o.find(".written-out").html(i.dateString),a=appointments.incrementDate(a)}null===appointments.appts?appointments.loadAppointments(function(){appointments.drawListView()}):appointments.drawListView()})})},a=t?500:0;setTimeout(function(){e()},a)}},appointmentsCalView:{container:".appointments-view",url:"pages/appointmentsCalView.html",hash:"calView",viewName:"CalView",init:function(t){if(0===$(".dashboard-header").length)return t&&$(".loading-page").addClass("loading").css("top",""),void pages.list.appointmentsDashboard.init(t,pages.list.appointmentsCalView.viewName);t&&$(".loading-page").css("top",$(".appointments-view").offset().top).addClass("loading");var e=function(){pages.gotoPage(pages.list.appointmentsCalView,function(){$(".toggle.viewStyle").addClass("selected-state"),$(".toggle.viewStyle .toggle-btn[value='Cal']").addClass("sel"),$(".calendar-booked-wrap").scrollTop(800),$(".calendar-booked-wrap").scroll(function(){var t=$(".calendar-booked-wrap").scrollTop();$(".time-markers-inner").css("transform","translateY(-"+t+"px)")}),$(".calendar-booked").empty(),null===appointments.appts?appointments.loadAppointments(function(){appointments.drawCalView()}):appointments.drawCalView()})},a=t?500:0;setTimeout(function(){e()},a)}}}};global={transistionEnd:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",breakpts:{sml:710,med:1010,lrg:1490},breakpt:function(){var t=window.innerWidth,e="lrg";for(var a in global.breakpts)if(global.breakpts[a]>=t){e=a;break}return e},pxToInt:function(t){var e=t.split("px")[0];return parseInt(e)},strToCamelCase:function(t){t=t.toLowerCase();var e=t.split(" ");if(1===e.length)return t;for(var a=e[0],n=1;n<e.length;n++)a+=e[n].charAt(0).toUpperCase()+e[n].slice(1);return a},decimalToTime:function(t){var e=Math.floor(t),a="am",n=Math.floor(t%1*60);return n=n<10?"0"+n:n,e>=12&&(e=12===e?e:e%12,a="pm"),e+":"+n+a},scrollTo:function(t,e,a){var n=t.offset().top-115;"listView"===pages.current&&(n=t.offset().top-115-53);var o=void 0===e?500:0;$("html,body").animate({scrollTop:n},o,function(){void 0!==a&&a()})},scrollToHorizontally:function(t,e,a,n){var o=t.position().left,i=void 0===a?500:0;e.animate({scrollLeft:o},i,function(){void 0!==n&&n()})},toTitleCase:function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},shuffleArray:function(t){for(var e=t.length,a,n;0!==e;)n=Math.floor(Math.random()*e),e-=1,a=t[e],t[e]=t[n],t[n]=a;return t},toggleGrid:function(){$(".grid").toggleClass("off")},closeEverything:function(){dropdown.closeAll(),$(".action-dropdown.expanded").each(function(){buttons.closeActionButton($(this).siblings(".button"))})},toggleSlideout:function(){$(".slideout").hasClass("collapsed")?global.openSlideout():global.closeSlideout()},openSlideout:function(){$(".slideout").removeClass("collapsed"),$("body").addClass("locked")},closeSlideout:function(){$(".slideout").addClass("collapsed"),$("body.locked").removeClass("locked");var t=$(".appt-item.selected").attr("id"),e=_.findWhere(appointments.appts,{_id:t});e&&appointments.redrawAppointmentItem(e),$(".appt-item.selected").removeClass("selected")},render:function(t,e,a,n,o){n=void 0===n||n,$.get("templates/_"+e+".html",function(e){Handlebars.registerHelper("eq",function(t,e){return t===e}),Handlebars.registerHelper("decimalToTime",function(t){return global.decimalToTime(t)}),Handlebars.registerHelper("shouldHaveTooltip",function(t,e){return"active"!==t||e}),Handlebars.registerHelper("convertProviderName",function(t){return t.toLowerCase().replace(/\s/g,"-")}),Handlebars.registerHelper("multiply",function(t,e){return parseFloat(t)*parseFloat(e)+"px"});var i=Handlebars.compile(e),s=i(t);void 0!==o&&o(),void 0!==a&&(n?$(a).html(s):$(a).append(s))})},refreshWithNewData:function(t,e,a,n,o){n=void 0===n?.2:n,TweenLite.to($(t),n,{alpha:0,ease:cssBezier,onComplete:function(){global.render(a,e,t,!0,function(){TweenLite.to($(t),n,{alpha:1,ease:cssBezier,onComplete:function(){void 0!==o&&setTimeout(o,.2)}})})}})}},appointments={appts:null,daysInMonths:[31,28,31,30,31,30,31,31,30,31,30,31],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dow:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],startingWeek:"2017-10-01 Sunday Oct.",today:"2017-10-03 Tuesday Oct.",durationSettings:{sick:{new:.75,returning:.5},physical:{new:1,returning:.75},pregnancyVisit:{new:1,returning:.5},wellWomanExam:{new:.75,returning:.5}},dateStrToObj:function(t){var e=t.split(" ");return{dateWithHyphens:e[0],dateNoHyphens:parseInt(e[0].replace(/-/g,"")),dateString:e[2]+" "+e[0].split("-")[2]+", "+e[0].split("-")[0],dayOfWeek:e[1],dayOfWeekShort:e[1].substr(0,3),month:e[2]}},getAppointmentsByDaySorted:function(t){var e=_.groupBy(t,function(t){return t.date.split(" ")[0].replace(/-/g,"")});for(var a in e){var n=e[a];e[a]=_.sortBy(n,function(t){return t.startTime})}return e},getAppointmentsByDayAndProvider:function(t){var e=_.groupBy(t,function(t){return t.date.split(" ")[0].replace(/-/g,"")});for(var a in e){var n=e[a];e[a]=_.sortBy(n,function(t){return t.provider.name}),e[a]=_.groupBy(e[a],function(t){return t.provider.name});for(var o in e[a])e[a][o]=_.sortBy(e[a][o],function(t){return t.startTime})}return e},incrementDate:function(t,e){e=void 0===e?1:e;var a=t.split(" "),n=new Date(a[0]);return n.setDate(n.getDate()+e+1),n.getFullYear()+"-"+(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(n.getDate()<10?"0"+n.getDate():n.getDate())+" "+appointments.dow[n.getDay()]+" "+appointments.monthsShort[n.getMonth()]+"."},durationByApptAndPatient:function(t){var e=global.strToCamelCase(t.type),a=t.member.newPatient?"new":"returning";return appointments.durationSettings[e][a]},determineStatus:function(t){var e=appointments.dateStrToObj(appointments.today).dateNoHyphens,a=appointments.dateStrToObj(t.date).dateNoHyphens,n=e>a;return t.past=n,n||(t.noShow=!1,t.lateCancel=!1),t.noShow?(t.lateCancel=!1,t.canceled=!1,"no-show"):(t.canceled=t.lateCancel||t.canceled,t.canceled?"canceled":n?"complete":"booked")},toggleBooleanToggleSwitch:function(t,e){var a=t[e],n=!a;t[e]=n},typeReasonToFields:function(t){var e=t.typeReason.split("-");t.type=e[0],t.reasonForVisit=e[1]},drawListView:function(){var t=appointments.getAppointmentsByDaySorted(appointments.appts);for(var e in t){var a=t[e],n={appointments:a};global.render(n,"appointments-list-item",$("#"+e+" .appointments-wrapper"))}subheader.scrollHelper($("html").scrollTop())},drawCalView:function(t){var e=appointments.getAppointmentsByDayAndProvider(appointments.appts),a=appointments.dateStrToObj(appointments.today).dateNoHyphens;$.get("partial/_calendar-header.html",function(n){var o=$(n);$(".calendar-header").empty();for(var i=appointments.startingWeek,s=0;s<7;s++){var l=appointments.dateStrToObj(i),d=l.dateNoHyphens;o.attr("key",l.dayOfWeek.toLowerCase()),o.find(".date-wrap").html(l.dayOfWeekShort+". "+l.dateString),o.find(".providers-wrap").empty();var r=a>d,p=$("<div />",{class:"day-wrap"});r&&(o.addClass("past"),p.addClass("past")),e[d]||p.addClass("empty");for(var c in e[d]){var u=c.toLowerCase().replace(/\s/g,"-");o.find(".providers-wrap").append("<div class='provider-header title4 "+u+"'>"+c+"</div>");var m={appointments:e[d][c]},h=$("<div class='provider-wrap "+u+"'></div>");global.render(m,"booked-appts-by-dayprov-cal",h,!1),p.append(h)}$(".calendar-booked").append(p),i=appointments.incrementDate(i),$(".calendar-header").append(o),o=o.clone().removeClass("past")}subheader.horizontalScrollHelper($(".appointments-calendar")),$(".appointments-calendar").scroll(function(){subheader.horizontalScrollHelper($(".appointments-calendar"))}),void 0!==t&&t()})},redrawAppointmentRow:function(t,e){var a=t._id;t.status=appointments.determineStatus(t);var n=$(".appt-wrapper#"+a),o={appointments:[t]};n.wrap('<div class="temp-wrapper"></div>'),global.refreshWithNewData(".appointments-wrapper .temp-wrapper","appointments-list-item",o,0,function(){$(".temp-wrapper .appt-wrapper").unwrap(),void 0!==e&&e()})},redrawAppointmentBlock:function(t,e){t.status=appointments.determineStatus(t),$(".calendar-booked").empty(),appointments.drawCalView(e)},redrawAppointmentItem:function(t,e){"listView"===pages.current?appointments.redrawAppointmentRow(t,e):appointments.redrawAppointmentBlock(t,e)},loadAppointments:function(t){$.getJSON("js/json/appointments.json",function(e){for(var a=e.appointments,n=0;n<a.length;n++)appointments.typeReasonToFields(a[n]),a[n].duration=appointments.durationByApptAndPatient(a[n]),a[n].endTime=a[n].startTime+a[n].duration,a[n].status=appointments.determineStatus(a[n]),a[n].potentialNoShow=!a[n].member.newPatient&&a[n].potentialNoShow,a[n].dateObject=appointments.dateStrToObj(a[n].date),a[n].provider.addressLine1=a[n].provider.address.split(",")[0],a[n].provider.addressLine2=a[n].provider.address.split(",")[1];appointments.appts=e.appointments,void 0!==t&&t()})}},buttons={inputSizeMap:{closed:{xsmall:"medium",small:"large",medium:"xlarge"},open:{xsmall:"medium",small:"medium",medium:"large"}},renderButtons:function(t,e){var a=void 0!==e?e.find(".partial.button"):$(".partial.button");a.each(function(e){var n=$(".partial.button")[e],o=$(n),i=o.attr("data-theme"),s=o.attr("data-size"),l=o.attr("data-text"),d=void 0!==o.attr("data-icon")?o.attr("data-icon").split(" "):[],r=o.attr("data-state"),p=void 0!==o.attr("data-custom-style")?o.attr("data-custom-style"):"",c=void 0!==o.attr("data-actions")?o.attr("data-actions").split(","):"",u=void 0!==o.attr("data-actionicons")?o.attr("data-actionicons").split(","):"";$.get("partial/_button.html",function(n){var m=$(n);if(m.addClass(i+" "+s+" "+r+" "+p),"icon-only"===r||"icon-only-action"===r){var h=$("<div />",{class:"button-icon-wrap icon-"+d[0]});d.length>1&&h.addClass(d[1]);var f="medium";"small"===s&&(f="small"),h.addClass("icon-"+f),m.find(".button").html(h)}else if("icon"===r){var g=$("<div />",{class:"icon-wrap icon-"+d[0]});d.length>1&&g.addClass(d[1]);var v="small";"xlarge"===s&&(v="medium"),g.addClass("icon-"+v),m.find(".button").html(g).append(l)}else m.find(".button").html(l);if("action"===r||"icon-only-action"===r){for(var w=$("<div />",{class:"action-dropdown"}),b=0;b<c.length;b++){var C=$("<div />",{class:"button-action",html:"<div class='action-title'>"+c[b]+"</div>"});u.length>0&&C.addClass("icon "+u[b]),w.append(C)}m.prepend(w)}o.parent().append(m),a.length-1===e&&(a.remove(),void 0!==t&&t())})})},toggleActionButton:function(t){t.siblings(".action-dropdown").hasClass("expanded")?global.closeEverything():(global.closeEverything(),buttons.openActionButton(t))},openActionButton:function(t){var e=t.siblings(".action-dropdown"),a=e.find(".button-action"),n=global.pxToInt(e.css("padding-top"))+global.pxToInt(e.css("padding-bottom"))+2;a.each(function(){n+=$(this).outerHeight()}),e.offset().top+n>$(window).height()?e.addClass("goUp"):e.removeClass("goUp"),e.offset().left-e.width()<50?e.addClass("goRight"):e.removeClass("goRight"),e.addClass("expanded"),TweenLite.to(e,.2,{height:n})},closeActionButton:function(t){var e=t.siblings(".action-dropdown");e.removeClass("expanded"),TweenLite.to(e,.2,{height:"100%"})}},dropdown={close:function(t){t.removeClass("expanded"),t.find(".typeaheadInput").blur()},closeAll:function(){dropdown.close($(".dropdown.expanded"))},open:function(t){global.closeEverything(),t.addClass("expanded"),t.find(".typeaheadInput").length>0&&(t.parents(".dd").hasClass("noheader")&&t.find(".typeaheadInput").val(""),t.find(".typeaheadInput").focus())},toggle:function(t){t.hasClass("expanded")?dropdown.close(t):dropdown.open(t)},selectOption:function(t,e,a){e.parents(".multi").length?(t.addClass("selected"),e.find(".view .selected").html(e.find(".option.selected").length+" selected")):(t.siblings(".selected").removeClass("selected"),t.addClass("selected"),0===t.children().length?e.find(".view .selected").html(t.text()):e.find(".view .selected").html(t.children(":first-child").text())),e.addClass("nonempty"),dropdown.close(e),"function"==typeof a&&a()},unselectOption:function(t,e){var a=e.parents(".multi").length;if(t.removeClass("selected"),a){0===e.find(".option.selected").length?(e.find(".view .selected").empty(),e.removeClass("nonempty")):e.find(".view .selected").html(NaN)}else e.find(".view .selected").empty(),e.removeClass("nonempty");dropdown.close(e)},renderDropdowns:function(t,e){var a="dropdown";$(".partial.typeahead").length>0&&(a="typeahead");var n=void 0!==e?e.find(".partial."+a):$(".partial."+a);n.each(function(e){var o=n[e],i=$(o),s=i.attr("data-theme"),l=i.attr("data-size"),d=i.attr("data-header"),r=i.attr("data-disabled")?"disabled":"",p=i.attr("data-selected"),c=i.attr("data-label"),u=i.attr("data-prompt"),m=i.attr("data-multi"),h=i.attr("data-options").split(","),f=i.attr("data-keys").split(","),g=i.attr("data-error")?i.attr("data-error"):"",v=i.attr("data-custom-style");v=void 0!==v?v:"",m=void 0!==m?"multi":"",$.get("partial/_"+a+".html",function(a){var o=$(a);o.addClass(s+" "+l+" "+d+" "+r+" "+v+" "+m),o.find(".label").html(c),o.find(".option-prompt").html(u),o.hasClass("typeahead")&&o.find("input.typeaheadInput").attr("placeholder",c);for(var w=0;w<h.length;w++){var b=$("<div />",{class:"option",key:""+f[w],html:""+h[w]});o.find(".options").append(b)}if(w<5&&o.addClass("lessthanfive"),void 0!==p){var C=o.find(".option[key='"+p+"']");C.addClass("selected"),o.find(".view .selected").html(C.text()),o.find(".dropdown").addClass("nonempty")}g.length>0&&(o.addClass("error"),o.find(".error-text").html(g),o.find(".error-text").removeClass("noshow")),i.parent().append(o),n.length-1===e&&(n.remove(),void 0!==t&&t())})})},searchTypeahead:function(t,e){for(var a=[],n=0;n<t.find(".option").length;n++){a[n]=t.find(".option").eq(n),a[n].addClass("noshow");var o=a[n].find(".query-match").contents();a[n].find(".query-match").replaceWith(o),a[n].html(a[n].text())}return _.filter(a,function(t){var a=t.text();if(a.toLowerCase().includes(e.toLowerCase())){t.removeClass("noshow");var n=a.toLowerCase().indexOf(e.toLowerCase()),o=n+e.length;return t.html(a.substring(0,n)+"<span class='query-match'>"+a.substring(n,o)+"</span>"+a.substr(o)),!0}return!1})}},subheader={initUnderline:function(){var t=$(".subheader-nav-item.sel").outerWidth(),e=$(".subheader-nav-item.sel").position().left-40;$(".subheader .underline").css("width",t).css("transform","translateX("+e+"px)")},selectNavItem:function(t){$(".subheader-nav-item.sel").removeClass("sel"),t.addClass("sel"),subheader.initUnderline()},scrollTo:function(t){var e=t.attr("key"),a=$(".subheadAnchor[key="+e+"]");global.scrollTo(a)},scrollToHorizontally:function(t,e){var a=t.attr("key"),n=$(".subheadAnchor[key="+a+"]");global.scrollToHorizontally(n,e)},scrollHelper:function(t){var e=0;$(".subheader-nav-item").each(function(a,n){var o=$(n).attr("key"),i=$(".subheadAnchor[key="+o+"]").offset().top-115;"listView"===pages.current&&(i=$(".subheadAnchor[key="+o+"]").offset().top-115-53),i<=t&&(e=a)});var a=parseInt(e);subheader.selectNavItem($(".subheader-nav-item").eq(a))},horizontalScrollHelper:function(t){var e=0,a=t.scrollLeft();$(".subheader-nav-item").each(function(t,n){var o=$(n).attr("key");$(".subheadAnchor[key="+o+"]").position().left-15<=a&&(e=t)}),subheader.selectNavItem($(".subheader-nav-item").eq(e))}},modal={openModal:function(t,e,a,n){e=void 0!==e?e:"large",a=void 0!==a&&a,a?$(".modal-container").addClass("closeable"):$(".modal-container").removeClass("closeable"),$(".modal").removeClass("small large fullscreen").addClass(e+" "+t);var o;$.get("partial/_"+t+"-modal.html",function(t){o=$("<div />",{class:"modal-content",html:t}),$(".modal").append(o),buttons.renderButtons(),textInput.renderTextInputs(),dropdown.renderDropdowns(),"function"==typeof n&&n(),$(".modal-container").removeClass("closed"),$("body").addClass("locked")})},closeModal:function(){$(".modal-container").addClass("closed"),setTimeout(function(){$(".slideout").hasClass("collapsed")&&$("body.locked").removeClass("locked"),$(".modal-content").remove(),$(".modal").attr("class","modal")},400)}},textInput={renderTextInputs:function(t,e){var a=void 0!==e?e.find(".partial.textInput"):$(".partial.textInput");a.each(function(e){var n=$(".partial.textInput")[e],o=$(n),i=o.attr("data-theme"),s=o.attr("data-size"),l=o.attr("data-header"),d=!!o.attr("data-disabled"),r=o.attr("data-label"),p=o.attr("data-value"),c=o.attr("data-error")?o.attr("data-error"):"";$.get("partial/_textInput.html",function(n){var u=$(n);u.addClass(i+" "+s+" "+l),u.find("label").text(r),u.find("input").attr("placeholder",r),void 0!==p&&u.find("input").val(p).addClass("nonempty"),d&&u.find("input").attr("disabled","true").addClass("disabled"),c.length>0&&(u.addClass("error"),u.find(".error-text").html(c),u.find(".error-text").removeClass("noshow")),o.parent().append(u),a.length-1===e&&(a.remove(),void 0!==t&&t())})})}},$(document).ready(function(){pages.init(!1),$(window).scroll(function(){var t=$("html, body").scrollTop();subheader.scrollHelper(t)}),$(window).resize(function(){setTimeout(function(){$(".action-dropdown.expanded").each(function(){$(this).offset().left+300>$(document).width()?$(this).addClass("goLeft"):$(this).removeClass("goLeft")})},500)}),Mousetrap.bind("ctrl+g",function(){global.toggleGrid()}),Mousetrap.bind("esc",function(){if(!$(".modal-container").hasClass("closed")&&$(".modal-container").hasClass("closeable"))return void modal.closeModal();global.closeSlideout()}),$(document).on("change",".fieldwrap input[type='text']",function(){$(this).val().length>0?$(this).addClass("nonempty"):$(this).removeClass("nonempty"),global.checkCompletion()}),$(document).on("mousedown",".option-prompt, .dropdown .view",function(t){clickX=t.clientX}),$(document).on("mousemove",".option-prompt, .dropdown .view",function(t){dragX=t.clientX}),$(document).on("click","input.typeaheadInput",function(t){t.stopPropagation()}),$(document).on("click",".fieldwrap.dd:not(.disabled), .option-prompt",function(t){if(t.stopPropagation(),!(Math.abs(clickX-dragX)>8)){var e=$(this).hasClass("dd")?$(this).find(".dropdown"):$(this).parents(".dd").find(".dropdown");dropdown.toggle(e)}}),$(document).on("click",".dd .option:not(.selected):not(.disabled)",function(t){t.stopPropagation(),dropdown.selectOption($(this),$(this).parents(".dropdown"))}),$(document).on("click",".dd .option.selected:not(.disabled)",function(t){t.stopPropagation(),dropdown.unselectOption($(this),$(this).parents(".dropdown"))}),$(document).on("click","body, form, .content",function(t){t.stopPropagation(),global.closeEverything()}),$(document).on("input","input.typeaheadInput",function(){var t=$(this);t.parents(".dropdown").addClass("loading"),setTimeout(function(){t.parents(".dropdown").removeClass("loading"),0===dropdown.searchTypeahead(t.parents(".typeahead"),t.val()).length?t.parents(".dropdown").addClass("empty"):t.parents(".dropdown").removeClass("empty")},Math.round(300*Math.random())+200)}),$(document).on("click",".buttonWrap.action .button, .buttonWrap.icon-only-action .button",function(t){t.stopPropagation(),buttons.toggleActionButton($(this))}),$(document).on("click",".xsmall.header .label",function(){$(this).siblings("input[type='text']").focus()}),$(document).on("click",".popover-text",function(t){t.stopPropagation(),$(this).siblings(".popover").toggleClass("closed");var e=$(this).offset().left,a=$(window).width();e+$(this).siblings(".popover").width()>a?$(this).addClass("flip"):$(this).removeClass("flip")}),$(document).on("click",".popover .close",function(t){t.stopPropagation(),$(this).parents(".popover").toggleClass("closed")}),$(document).on("click",".checkbox, .checkbox-text",function(t){t.stopPropagation();var e=$(this);$(this).hasClass("checkbox-text")&&(e=$(this).siblings(".checkbox")),e.toggleClass("checked")}),$(document).on("mouseover",".tooltip-icon",function(){var t=$(this).offset().left,e=$(window).width();t+$(this).siblings(".tooltip").width()>e?$(this).addClass("flip"):$(this).removeClass("flip")}),$(document).on("click",".subheader-nav-item",function(t){t.stopPropagation(),subheader.selectNavItem($(this)),"calView"===pages.current?subheader.scrollToHorizontally($(this),$(".appointments-calendar")):subheader.scrollTo($(this))}),$(document).on("click",".modal",function(t){t.stopPropagation()}),$(document).on("click",".modal .close, .closeable",function(t){t.stopPropagation();var e=$(t.currentTarget);e.hasClass("modal")||e.parents(".modal").length>0&&!e.hasClass("close")||modal.closeModal()}),$(document).on("click",".toggle:not(.disabled) .toggle-btn:not(.sel)",function(t){t.stopPropagation(),$(this).parents(".toggle").find(".sel").removeClass("sel"),$(this).addClass("sel")}),$(document).on("click",".slideout .close, .slideout.freeze-bg .freeze",function(){global.closeSlideout()}),$(document).on("click",".toggleSwitch",function(){$(this).toggleClass("false"),$(this).toggleClass("true")}),$(document).on("click",".appt-wrapper, .appointment-block",function(){var t=$(this).attr("id"),e={appointments:[_.findWhere(appointments.appts,{_id:t})]};if($(".slideout").hasClass("collapsed"))$(this).addClass("selected"),global.render(e,"appointment-slideout",$(".slideout .slideoutContent"),!0,function(){global.openSlideout()});else if($(this).hasClass("selected"))global.closeSlideout();else{var a=$(".appt-item.selected").attr("id");appointments.redrawAppointmentItem(_.findWhere(appointments.appts,{_id:a})),$(".appt-item.selected").removeClass("selected"),$(this).addClass("selected"),global.refreshWithNewData(".slideout .slideoutContent","appointment-slideout",e)}}),$(document).on("click",".provider-filter .dd .option",function(t){t.stopPropagation();var e=$(this).attr("key");$(".appointments-list, .appointments-calendar").removeClass("all-providers claudia-roberts-only karen-mcadoo-only"),$(".appointments-list, .appointments-calendar").addClass(e)}),$(document).on("click",".toggleSwitch.noShow, .toggleSwitch.lateCancel",function(){var t=$(this).parents(".slideout-section.appointment").attr("data-id"),e=_.findWhere(appointments.appts,{_id:t});$(this).hasClass("noShow")?appointments.toggleBooleanToggleSwitch(e,"noShow"):$(this).hasClass("lateCancel")&&appointments.toggleBooleanToggleSwitch(e,"lateCancel")}),$(document).on("click",".slideout .cancelCTA:not(.disabled)",function(){modal.openModal("cancelAppointment","small",!0,function(){var t=$(".appt-item.selected").attr("id"),e=_.findWhere(appointments.appts,{_id:t}),a={appointments:[e]};global.render(a,"cancel-appt-modal-datalist",$(".modal .appointment-summary"))})}),$(document).on("click",".cancelReason .dd .option:not(.selected):not(.disabled)",function(t){t.stopPropagation(),dropdown.selectOption($(this),$(this).parents(".dropdown"),function(){$(".full-width-modal-cta.cancel-appt .buttonWrap.disabled").removeClass("disabled")})}),$(document).on("click",".full-width-modal-cta.go-back .button",function(t){t.stopPropagation(),modal.closeModal()}),$(document).on("click",".full-width-modal-cta.cancel-appt .buttonWrap:not(.disabled) .button",function(t){t.stopPropagation();var e=$(".appt-item.selected").attr("id"),a=_.findWhere(appointments.appts,{_id:e});a.canceled=!0,a.lateCancel=$(".data-row.late-cancel .checkbox").hasClass("checked");var n={appointments:[a]};modal.closeModal(),appointments.redrawAppointmentItem(a,function(){$(".appt-item#"+e).addClass("selected")}),global.refreshWithNewData(".slideout .slideoutContent","appointment-slideout",n)}),$(document).on("click",".toggle.viewStyle .toggle-btn:not(.sel)",function(){var t=$(this).attr("value")+"View";global.closeSlideout(),pages.list["appointments"+t].init(!0)})});