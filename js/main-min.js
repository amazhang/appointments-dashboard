var appointments,global,buttons,dropdown,textInput,subheader,modal,clickX,dragX,cssBezier=new Ease(new BezierEasing(.7,0,.3,1)),pages={current:"NA",init:function(t){var e=pages.list.appointmentsDashboard;for(var n in pages.list){var a=pages.list[n];a.hash===window.location.hash.substring(1)&&(e=a)}e.init(t)},gotoPage:function(t,e){$(t.container).load(t.url,function(){$(window).scrollTop(0),$(".loading-page").removeClass("loading"),window.location.hash.substr(1)!==t.hash&&pages.updateHash(t.hash),pages.current=t.hash;var n=$("body").attr("class").split(" ");$("body").attr("class",n[0]),$("body").addClass(t.hash),e&&e()})},updateHash:function(t){window.location.hash.substr(1)!==t?window.location.hash=t:pages.init(!0)},list:{appointmentsDashboard:{container:".page-content",defaultView:"ListView",url:"pages/appointmentsDashboardShell.html",hash:"dashboard",init:function(t,e){e=void 0===e?this.defaultView:e,$(".loading-page").addClass("loading");var n=function(){pages.gotoPage(pages.list.appointmentsDashboard,function(){buttons.renderButtons(),dropdown.renderDropdowns(),pages.list["appointments"+e].init(t)})},a=t?500:0;setTimeout(function(){n()},a)}},appointmentsListView:{container:".appointments-view",url:"pages/appointmentsListView.html",hash:"listView",viewName:"ListView",init:function(t){if(0===$(".dashboard-header").length)return t&&$(".loading-page").addClass("loading").css("top",""),void pages.list.appointmentsDashboard.init(t,pages.list.appointmentsListView.viewName);t&&$(".loading-page").css("top",$(".appointments-view").offset().top).addClass("loading");var e=function(){pages.gotoPage(pages.list.appointmentsListView,function(){$(".toggle.viewStyle").addClass("selected-state"),$(".toggle.viewStyle .toggle-btn[value='List']").addClass("sel"),$.get("partial/_listdate.html",function(t){var e=$(t);$(".appointments-list").append(e);for(var n=appointments.startingWeek,a=0;a<$(".date-row").length;a++){var o=$(".date-row").eq(a),i=appointments.dateStrToObj(n);o.attr("id",i.dateNoHyphens),o.find(".written-out").html(i.dateString),n=appointments.incrementDate(n)}null===appointments.appts?appointments.loadAppointments(function(){appointments.drawListView()}):appointments.drawListView()})})},n=t?500:0;setTimeout(function(){e()},n)}},appointmentsCalView:{container:".appointments-view",url:"pages/appointmentsCalView.html",hash:"calView",viewName:"CalView",init:function(t){if(0===$(".dashboard-header").length)return t&&$(".loading-page").addClass("loading").css("top",""),void pages.list.appointmentsDashboard.init(t,pages.list.appointmentsCalView.viewName);t&&$(".loading-page").css("top",$(".appointments-view").offset().top).addClass("loading");var e=function(){pages.gotoPage(pages.list.appointmentsCalView,function(){$(".toggle.viewStyle").addClass("selected-state"),$(".toggle.viewStyle .toggle-btn[value='Cal']").addClass("sel"),$(".calendar-booked-wrap").scrollTop(800),$(".calendar-booked-wrap").scroll(function(){var t=$(".calendar-booked-wrap").scrollTop();$(".time-markers-inner").css("transform","translateY(-"+t+"px)")}),null===appointments.appts?appointments.loadAppointments(function(){appointments.drawCalView()}):appointments.drawCalView()})},n=t?500:0;setTimeout(function(){e()},n)}}}};global={transistionEnd:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",breakpts:{sml:710,med:1010,lrg:1490},breakpt:function(){var t=window.innerWidth,e="lrg";for(var n in global.breakpts)if(global.breakpts[n]>=t){e=n;break}return e},pxToInt:function(t){var e=t.split("px")[0];return parseInt(e)},strToCamelCase:function(t){t=t.toLowerCase();var e=t.split(" ");if(1===e.length)return t;for(var n=e[0],a=1;a<e.length;a++)n+=e[a].charAt(0).toUpperCase()+e[a].slice(1);return n},decimalToTime:function(t){var e=Math.floor(t),n="am",a=Math.floor(t%1*60);return a=a<10?"0"+a:a,e>=12&&(e=12===e?e:e%12,n="pm"),e+":"+a+n},scrollTo:function(t,e,n){var a=t.offset().top-115;"listView"===pages.current&&(a=t.offset().top-115-53);var o=0;(void 0===e||e)&&(o=500),$("html,body").animate({scrollTop:a},o,function(){void 0!==n&&n()})},toTitleCase:function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},shuffleArray:function(t){for(var e=t.length,n,a;0!==e;)a=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[a],t[a]=n;return t},toggleGrid:function(){$(".grid").toggleClass("off")},closeEverything:function(){dropdown.closeAll(),$(".action-dropdown.expanded").each(function(){buttons.closeActionButton($(this).siblings(".button"))})},toggleSlideout:function(){$(".slideout").hasClass("collapsed")?global.openSlideout():global.closeSlideout()},openSlideout:function(){$(".slideout").removeClass("collapsed"),$("body").addClass("locked")},closeSlideout:function(){$(".slideout").addClass("collapsed"),$("body.locked").removeClass("locked");var t=$(".appt-item.selected").attr("id"),e=_.findWhere(appointments.appts,{_id:t});"listView"===pages.current?appointments.redrawAppointmentRow(_.findWhere(appointments.appts,{_id:selectedId})):appointments.redrawAppointmentBlock(_.findWhere(appointments.appts,{_id:selectedId})),$(".appt-item.selected").removeClass("selected")},render:function(t,e,n,a,o){a=void 0===a||a,$.get("templates/_"+e+".html",function(e){Handlebars.registerHelper("eq",function(t,e){return t===e}),Handlebars.registerHelper("decimalToTime",function(t){return global.decimalToTime(t)}),Handlebars.registerHelper("shouldHaveTooltip",function(t,e){return"active"!==t||e}),Handlebars.registerHelper("convertProviderName",function(t){return t.toLowerCase().replace(/\s/g,"-")}),Handlebars.registerHelper("multiply",function(t,e){return parseFloat(t)*parseFloat(e)+"px"});var i=Handlebars.compile(e),s=i(t);void 0!==o&&o(),void 0!==n&&(a?$(n).html(s):$(n).append(s))})},refreshWithNewData:function(t,e,n,a,o){a=void 0===a?.2:a,TweenLite.to($(t),a,{alpha:0,ease:cssBezier,onComplete:function(){global.render(n,e,t,!0,function(){TweenLite.to($(t),a,{alpha:1,ease:cssBezier,onComplete:function(){void 0!==o&&setTimeout(o,.2)}})})}})}},appointments={appts:null,daysInMonths:[31,28,31,30,31,30,31,31,30,31,30,31],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dow:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],startingWeek:"2017-10-01 Sunday Oct.",today:"2017-10-03 Tuesday Oct.",durationSettings:{sick:{new:.75,returning:.5},physical:{new:1,returning:.75},pregnancyVisit:{new:1,returning:.5},wellWomanExam:{new:.75,returning:.5}},dateStrToObj:function(t){var e=t.split(" ");return{dateWithHyphens:e[0],dateNoHyphens:parseInt(e[0].replace(/-/g,"")),dateString:e[2]+" "+e[0].split("-")[2]+", "+e[0].split("-")[0],dayOfWeek:e[1],dayOfWeekShort:e[1].substr(0,3),month:e[2]}},getAppointmentsByDaySorted:function(t){var e=_.groupBy(t,function(t){return t.date.split(" ")[0].replace(/-/g,"")});for(var n in e){var a=e[n];e[n]=_.sortBy(a,function(t){return t.startTime})}return e},getAppointmentsByDayAndProvider:function(t){var e=_.groupBy(t,function(t){return t.date.split(" ")[0].replace(/-/g,"")});for(var n in e){var a=e[n];e[n]=_.sortBy(a,function(t){return t.provider.name}),e[n]=_.groupBy(e[n],function(t){return t.provider.name});for(var o in e[n])e[n][o]=_.sortBy(e[n][o],function(t){return t.startTime})}return e},incrementDate:function(t,e){e=void 0===e?1:e;var n=t.split(" "),a=new Date(n[0]);return a.setDate(a.getDate()+e+1),a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+(a.getDate()<10?"0"+a.getDate():a.getDate())+" "+appointments.dow[a.getDay()]+" "+appointments.monthsShort[a.getMonth()]+"."},durationByApptAndPatient:function(t){var e=global.strToCamelCase(t.type),n=t.member.newPatient?"new":"returning";return appointments.durationSettings[e][n]},determineStatus:function(t){var e=appointments.dateStrToObj(appointments.today).dateNoHyphens,n=appointments.dateStrToObj(t.date).dateNoHyphens,a=e>n;return t.past=a,a||(t.noShow=!1,t.lateCancel=!1),t.noShow?(t.lateCancel=!1,t.canceled=!1,"no-show"):(t.canceled=t.lateCancel||t.canceled,t.canceled?"canceled":a?"complete":"booked")},toggleBooleanToggleSwitch:function(t,e){var n=t[e],a=!n;t[e]=a},typeReasonToFields:function(t){var e=t.typeReason.split("-");t.type=e[0],t.reasonForVisit=e[1]},drawListView:function(){var t=appointments.getAppointmentsByDaySorted(appointments.appts);for(var e in t){var n=t[e],a={appointments:n};global.render(a,"appointments-list-item",$("#"+e+" .appointments-wrapper"))}subheader.scrollHelper($("html").scrollTop())},drawCalView:function(){var t=appointments.getAppointmentsByDayAndProvider(appointments.appts),e=appointments.dateStrToObj(appointments.today).dateNoHyphens;$.get("partial/_calendar-header.html",function(n){var a=$(n);$(".calendar-header").empty();for(var o=appointments.startingWeek,i=0;i<7;i++){var s=appointments.dateStrToObj(o),l=s.dateNoHyphens;a.find(".date-wrap").html(s.dayOfWeekShort+". "+s.dateString),a.find(".providers-wrap").empty();var d=e>l,r=$("<div />",{class:"day-wrap"});d&&(a.addClass("past"),r.addClass("past")),t[l]||r.addClass("empty");for(var p in t[l]){a.find(".providers-wrap").append("<div class='provider-header title4'>"+p+"</div>");var c={appointments:t[l][p]};global.render(c,"booked-appts-by-dayprov-cal",r,!1)}$(".calendar-booked").append(r),o=appointments.incrementDate(o),$(".calendar-header").append(a),a=a.clone().removeClass("past")}})},redrawAppointmentRow:function(t,e){var n=t._id;t.status=appointments.determineStatus(t);var a=$(".appt-wrapper#"+n),o={appointments:[t]};a.wrap('<div class="temp-wrapper"></div>'),global.refreshWithNewData(".appointments-wrapper .temp-wrapper","appointments-list-item",o,0,function(){$(".temp-wrapper .appt-wrapper").unwrap(),void 0!==e&&e()})},redrawAppointmentBlock:function(t,e){var n=t._id},loadAppointments:function(t){$.getJSON("js/json/appointments.json",function(e){for(var n=e.appointments,a=0;a<n.length;a++)appointments.typeReasonToFields(n[a]),n[a].duration=appointments.durationByApptAndPatient(n[a]),n[a].endTime=n[a].startTime+n[a].duration,n[a].status=appointments.determineStatus(n[a]),n[a].potentialNoShow=!n[a].member.newPatient&&n[a].potentialNoShow,n[a].dateObject=appointments.dateStrToObj(n[a].date),n[a].provider.addressLine1=n[a].provider.address.split(",")[0],n[a].provider.addressLine2=n[a].provider.address.split(",")[1];appointments.appts=e.appointments,void 0!==t&&t()})}},buttons={inputSizeMap:{closed:{xsmall:"medium",small:"large",medium:"xlarge"},open:{xsmall:"medium",small:"medium",medium:"large"}},renderButtons:function(t,e){var n=void 0!==e?e.find(".partial.button"):$(".partial.button");n.each(function(e){var a=$(".partial.button")[e],o=$(a),i=o.attr("data-theme"),s=o.attr("data-size"),l=o.attr("data-text"),d=void 0!==o.attr("data-icon")?o.attr("data-icon").split(" "):[],r=o.attr("data-state"),p=void 0!==o.attr("data-custom-style")?o.attr("data-custom-style"):"",c=void 0!==o.attr("data-actions")?o.attr("data-actions").split(","):"",u=void 0!==o.attr("data-actionicons")?o.attr("data-actionicons").split(","):"";$.get("partial/_button.html",function(a){var m=$(a);if(m.addClass(i+" "+s+" "+r+" "+p),"icon-only"===r||"icon-only-action"===r){var h=$("<div />",{class:"button-icon-wrap icon-"+d[0]});d.length>1&&h.addClass(d[1]);var g="medium";"small"===s&&(g="small"),h.addClass("icon-"+g),m.find(".button").html(h)}else if("icon"===r){var f=$("<div />",{class:"icon-wrap icon-"+d[0]});d.length>1&&f.addClass(d[1]);var v="small";"xlarge"===s&&(v="medium"),f.addClass("icon-"+v),m.find(".button").html(f).append(l)}else m.find(".button").html(l);if("action"===r||"icon-only-action"===r){for(var w=$("<div />",{class:"action-dropdown"}),b=0;b<c.length;b++){var C=$("<div />",{class:"button-action",html:"<div class='action-title'>"+c[b]+"</div>"});u.length>0&&C.addClass("icon "+u[b]),w.append(C)}m.prepend(w)}o.parent().append(m),n.length-1===e&&(n.remove(),void 0!==t&&t())})})},toggleActionButton:function(t){t.siblings(".action-dropdown").hasClass("expanded")?global.closeEverything():(global.closeEverything(),buttons.openActionButton(t))},openActionButton:function(t){var e=t.siblings(".action-dropdown"),n=e.find(".button-action"),a=global.pxToInt(e.css("padding-top"))+global.pxToInt(e.css("padding-bottom"))+2;n.each(function(){a+=$(this).outerHeight()}),e.offset().top+a>$(window).height()?e.addClass("goUp"):e.removeClass("goUp"),e.offset().left-e.width()<50?e.addClass("goRight"):e.removeClass("goRight"),e.addClass("expanded"),TweenLite.to(e,.2,{height:a})},closeActionButton:function(t){var e=t.siblings(".action-dropdown");e.removeClass("expanded"),TweenLite.to(e,.2,{height:"100%"})}},dropdown={close:function(t){t.removeClass("expanded"),t.find(".typeaheadInput").blur()},closeAll:function(){dropdown.close($(".dropdown.expanded"))},open:function(t){global.closeEverything(),t.addClass("expanded"),t.find(".typeaheadInput").length>0&&(t.parents(".dd").hasClass("noheader")&&t.find(".typeaheadInput").val(""),t.find(".typeaheadInput").focus())},toggle:function(t){t.hasClass("expanded")?dropdown.close(t):dropdown.open(t)},selectOption:function(t,e,n){e.parents(".multi").length?(t.addClass("selected"),e.find(".view .selected").html(e.find(".option.selected").length+" selected")):(t.siblings(".selected").removeClass("selected"),t.addClass("selected"),0===t.children().length?e.find(".view .selected").html(t.text()):e.find(".view .selected").html(t.children(":first-child").text())),e.addClass("nonempty"),dropdown.close(e),"function"==typeof n&&n()},unselectOption:function(t,e){var n=e.parents(".multi").length;if(t.removeClass("selected"),n){0===e.find(".option.selected").length?(e.find(".view .selected").empty(),e.removeClass("nonempty")):e.find(".view .selected").html(NaN)}else e.find(".view .selected").empty(),e.removeClass("nonempty");dropdown.close(e)},renderDropdowns:function(t,e){var n="dropdown";$(".partial.typeahead").length>0&&(n="typeahead");var a=void 0!==e?e.find(".partial."+n):$(".partial."+n);a.each(function(e){var o=a[e],i=$(o),s=i.attr("data-theme"),l=i.attr("data-size"),d=i.attr("data-header"),r=i.attr("data-disabled")?"disabled":"",p=i.attr("data-selected"),c=i.attr("data-label"),u=i.attr("data-prompt"),m=i.attr("data-multi"),h=i.attr("data-options").split(","),g=i.attr("data-keys").split(","),f=i.attr("data-error")?i.attr("data-error"):"",v=i.attr("data-custom-style");v=void 0!==v?v:"",m=void 0!==m?"multi":"",$.get("partial/_"+n+".html",function(n){var o=$(n);o.addClass(s+" "+l+" "+d+" "+r+" "+v+" "+m),o.find(".label").html(c),o.find(".option-prompt").html(u),o.hasClass("typeahead")&&o.find("input.typeaheadInput").attr("placeholder",c);for(var w=0;w<h.length;w++){var b=$("<div />",{class:"option",key:""+g[w],html:""+h[w]});o.find(".options").append(b)}if(w<5&&o.addClass("lessthanfive"),void 0!==p){var C=o.find(".option[key='"+p+"']");C.addClass("selected"),o.find(".view .selected").html(C.text()),o.find(".dropdown").addClass("nonempty")}f.length>0&&(o.addClass("error"),o.find(".error-text").html(f),o.find(".error-text").removeClass("noshow")),i.parent().append(o),a.length-1===e&&(a.remove(),void 0!==t&&t())})})},searchTypeahead:function(t,e){for(var n=[],a=0;a<t.find(".option").length;a++){n[a]=t.find(".option").eq(a),n[a].addClass("noshow");var o=n[a].find(".query-match").contents();n[a].find(".query-match").replaceWith(o),n[a].html(n[a].text())}return _.filter(n,function(t){var n=t.text();if(n.toLowerCase().includes(e.toLowerCase())){t.removeClass("noshow");var a=n.toLowerCase().indexOf(e.toLowerCase()),o=a+e.length;return t.html(n.substring(0,a)+"<span class='query-match'>"+n.substring(a,o)+"</span>"+n.substr(o)),!0}return!1})}},subheader={initUnderline:function(){var t=$(".subheader-nav-item.sel").outerWidth(),e=$(".subheader-nav-item.sel").position().left-40;$(".subheader .underline").css("width",t).css("transform","translateX("+e+"px)")},selectNavItem:function(t){$(".subheader-nav-item.sel").removeClass("sel"),t.addClass("sel"),subheader.initUnderline()},scrollTo:function(t){var e=t.attr("key"),n=$(".subheadAnchor[key="+e+"]");global.scrollTo(n)},scrollHelper:function(t){var e=0;$(".subheader-nav-item").each(function(n,a){var o=$(a).attr("key"),i=$(".subheadAnchor[key="+o+"]").offset().top-115;"listView"===pages.current&&(i=$(".subheadAnchor[key="+o+"]").offset().top-115-53),i<=t&&(e=n)});var n=parseInt(e)+2;subheader.selectNavItem($(".subheader-nav-item:nth-child("+n+")"))}},modal={openModal:function(t,e,n,a){e=void 0!==e?e:"large",n=void 0!==n&&n,n?$(".modal-container").addClass("closeable"):$(".modal-container").removeClass("closeable"),$(".modal").removeClass("small large fullscreen").addClass(e+" "+t);var o;$.get("partial/_"+t+"-modal.html",function(t){o=$("<div />",{class:"modal-content",html:t}),$(".modal").append(o),buttons.renderButtons(),textInput.renderTextInputs(),dropdown.renderDropdowns(),"function"==typeof a&&a(),$(".modal-container").removeClass("closed"),$("body").addClass("locked")})},closeModal:function(){$(".modal-container").addClass("closed"),setTimeout(function(){$(".slideout").hasClass("collapsed")&&$("body.locked").removeClass("locked"),$(".modal-content").remove(),$(".modal").attr("class","modal")},400)}},textInput={renderTextInputs:function(t,e){var n=void 0!==e?e.find(".partial.textInput"):$(".partial.textInput");n.each(function(e){var a=$(".partial.textInput")[e],o=$(a),i=o.attr("data-theme"),s=o.attr("data-size"),l=o.attr("data-header"),d=!!o.attr("data-disabled"),r=o.attr("data-label"),p=o.attr("data-value"),c=o.attr("data-error")?o.attr("data-error"):"";$.get("partial/_textInput.html",function(a){var u=$(a);u.addClass(i+" "+s+" "+l),u.find("label").text(r),u.find("input").attr("placeholder",r),void 0!==p&&u.find("input").val(p).addClass("nonempty"),d&&u.find("input").attr("disabled","true").addClass("disabled"),c.length>0&&(u.addClass("error"),u.find(".error-text").html(c),u.find(".error-text").removeClass("noshow")),o.parent().append(u),n.length-1===e&&(n.remove(),void 0!==t&&t())})})}},$(document).ready(function(){pages.init(!1),$(window).scroll(function(){var t=$("html").scrollTop();subheader.scrollHelper(t)}),$(window).resize(function(){setTimeout(function(){$(".action-dropdown.expanded").each(function(){$(this).offset().left+300>$(document).width()?$(this).addClass("goLeft"):$(this).removeClass("goLeft")})},500)}),Mousetrap.bind("ctrl+g",function(){global.toggleGrid()}),Mousetrap.bind("esc",function(){if(!$(".modal-container").hasClass("closed")&&$(".modal-container").hasClass("closeable"))return void modal.closeModal();global.closeSlideout()}),$(document).on("change",".fieldwrap input[type='text']",function(){$(this).val().length>0?$(this).addClass("nonempty"):$(this).removeClass("nonempty"),global.checkCompletion()}),$(document).on("mousedown",".option-prompt, .dropdown .view",function(t){clickX=t.clientX}),$(document).on("mousemove",".option-prompt, .dropdown .view",function(t){dragX=t.clientX}),$(document).on("click","input.typeaheadInput",function(t){t.stopPropagation()}),$(document).on("click",".fieldwrap.dd:not(.disabled), .option-prompt",function(t){if(t.stopPropagation(),!(Math.abs(clickX-dragX)>8)){var e=$(this).hasClass("dd")?$(this).find(".dropdown"):$(this).parents(".dd").find(".dropdown");dropdown.toggle(e)}}),$(document).on("click",".dd .option:not(.selected):not(.disabled)",function(t){t.stopPropagation(),dropdown.selectOption($(this),$(this).parents(".dropdown"))}),$(document).on("click",".dd .option.selected:not(.disabled)",function(t){t.stopPropagation(),dropdown.unselectOption($(this),$(this).parents(".dropdown"))}),$(document).on("click","body, form, .content",function(t){t.stopPropagation(),global.closeEverything()}),$(document).on("input","input.typeaheadInput",function(){var t=$(this);t.parents(".dropdown").addClass("loading"),setTimeout(function(){t.parents(".dropdown").removeClass("loading"),0===dropdown.searchTypeahead(t.parents(".typeahead"),t.val()).length?t.parents(".dropdown").addClass("empty"):t.parents(".dropdown").removeClass("empty")},Math.round(300*Math.random())+200)}),$(document).on("click",".buttonWrap.action .button, .buttonWrap.icon-only-action .button",function(t){t.stopPropagation(),buttons.toggleActionButton($(this))}),$(document).on("click",".xsmall.header .label",function(){$(this).siblings("input[type='text']").focus()}),$(document).on("click",".popover-text",function(t){t.stopPropagation(),$(this).siblings(".popover").toggleClass("closed");var e=$(this).offset().left,n=$(window).width();e+$(this).siblings(".popover").width()>n?$(this).addClass("flip"):$(this).removeClass("flip")}),$(document).on("click",".popover .close",function(t){t.stopPropagation(),$(this).parents(".popover").toggleClass("closed")}),$(document).on("click",".checkbox, .checkbox-text",function(t){t.stopPropagation();var e=$(this);$(this).hasClass("checkbox-text")&&(e=$(this).siblings(".checkbox")),e.toggleClass("checked")}),$(document).on("mouseover",".tooltip-icon",function(){var t=$(this).offset().left,e=$(window).width();t+$(this).siblings(".tooltip").width()>e?$(this).addClass("flip"):$(this).removeClass("flip")}),$(document).on("click",".subheader-nav-item",function(t){t.stopPropagation(),subheader.selectNavItem($(this)),subheader.scrollTo($(this))}),$(document).on("click",".modal",function(t){t.stopPropagation()}),$(document).on("click",".modal .close, .closeable",function(t){t.stopPropagation();var e=$(t.currentTarget);e.hasClass("modal")||e.parents(".modal").length>0&&!e.hasClass("close")||modal.closeModal()}),$(document).on("click",".toggle:not(.disabled) .toggle-btn:not(.sel)",function(t){t.stopPropagation(),$(this).parents(".toggle").find(".sel").removeClass("sel"),$(this).addClass("sel")}),$(document).on("click",".slideout .close",function(){global.closeSlideout()}),$(document).on("click",".toggleSwitch",function(){$(this).toggleClass("false"),$(this).toggleClass("true")}),$(document).on("click",".appt-wrapper, .appointment-block",function(){var t=$(this).attr("id"),e={appointments:[_.findWhere(appointments.appts,{_id:t})]};if($(".slideout").hasClass("collapsed"))$(this).addClass("selected"),global.render(e,"appointment-slideout",$(".slideout .slideoutContent"),!0,function(){global.openSlideout()});else if($(this).hasClass("selected"))global.closeSlideout();else{var n=$(".appt-item.selected").attr("id");"listView"===pages.current?appointments.redrawAppointmentRow(_.findWhere(appointments.appts,{_id:n})):appointments.redrawAppointmentBlock(_.findWhere(appointments.appts,{_id:n})),$(".appt-item.selected").removeClass("selected"),$(this).addClass("selected"),global.refreshWithNewData(".slideout .slideoutContent","appointment-slideout",e)}}),$(document).on("click",".provider-filter .dd .option",function(t){t.stopPropagation();var e=$(this).attr("key");$(".appointments-list").removeClass("all-doctors claudia-roberts-only karen-mcadoo-only"),$(".appointments-list").addClass(e)}),$(document).on("click",".toggleSwitch.noShow, .toggleSwitch.lateCancel",function(){var t=$(this).parents(".slideout-section.appointment").attr("data-id"),e=_.findWhere(appointments.appts,{_id:t});$(this).hasClass("noShow")?appointments.toggleBooleanToggleSwitch(e,"noShow"):$(this).hasClass("lateCancel")&&appointments.toggleBooleanToggleSwitch(e,"lateCancel")}),$(document).on("click",".slideout .cancelCTA:not(.disabled)",function(){modal.openModal("cancelAppointment","small",!0,function(){var t=$(".appt-item.selected").attr("id"),e=_.findWhere(appointments.appts,{_id:t}),n={appointments:[e]};global.render(n,"cancel-appt-modal-datalist",$(".modal .appointment-summary"))})}),$(document).on("click",".cancelReason .dd .option:not(.selected):not(.disabled)",function(t){t.stopPropagation(),dropdown.selectOption($(this),$(this).parents(".dropdown"),function(){$(".full-width-modal-cta.cancel-appt .buttonWrap.disabled").removeClass("disabled")})}),$(document).on("click",".full-width-modal-cta.go-back .button",function(t){t.stopPropagation(),modal.closeModal()}),$(document).on("click",".full-width-modal-cta.cancel-appt .buttonWrap:not(.disabled) .button",function(t){t.stopPropagation();var e=$(".appt-item.selected").attr("id"),n=_.findWhere(appointments.appts,{_id:e});n.canceled=!0,n.lateCancel=$(".data-row.late-cancel .checkbox").hasClass("checked");var a={appointments:[n]};modal.closeModal(),"listView"===pages.current?appointments.redrawAppointmentRow(n,function(){$(".appt-item#"+e).addClass("selected")}):appointments.redrawAppointmentBlock(n,function(){$(".appt-item#"+e).addClass("selected")}),global.refreshWithNewData(".slideout .slideoutContent","appointment-slideout",a)}),$(document).on("click",".toggle.viewStyle .toggle-btn:not(.sel)",function(){var t=$(this).attr("value")+"View";pages.list["appointments"+t].init(!0)})});